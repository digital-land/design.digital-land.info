{% extends "layouts/layout.html" %}
{%- from 'govuk_frontend_jinja/components/table/macro.html' import govukTable -%}
{%- from 'govuk_frontend_jinja/components/tag/macro.html' import govukTag -%}
{% block pageTitle %}Feedback{% endblock %}
{% block content %}
  <main id="content" role="main">
    {% set lpas = [
      "South Downs National Park Authority",
      "Lake District National Park Authority",
      "Yorkshire Dales National Park Authority",
      "Broads Authority",
      "Dartmoor National Park Authority",
      "New Forest National Park Authority",
      "North York Moors National Park Authority",
      "Exmoor National Park Authority",
      "Northumberland National Park Authority",
      "Peak District National Park Authority",
      "Old Oak and Park Royal Development Corporation",
      "London Legacy Development Corporation",
      "South Tees Development Corporation",
      "Ebbsfleet Development Corporation",    
      "Adur District Council",
      "Allerdale Borough Council",
      "Amber Valley Borough Council",
      "Arun District Council",
      "Ashford Borough Council",
      "Ashfield District Council",
      "Aylesbury Vale District Council",
      "Babergh District Council",
      "Bassetlaw District Council",
      "Basildon Borough Council",
      "Basingstoke and Deane Borough Council",
      "Barrow-in-Furness Borough Council",
      "Bath and North East Somerset Council",
      "Blackburn with Darwen Borough Council",
      "Bedford Borough Council",
      "London Borough of Barking and Dagenham",
      "London Borough of Brent",
      "London Borough of Bexley",
      "Birmingham City Council",
      "Buckinghamshire County Council",
      "Blaby District Council",
      "Bournemouth Borough Council",
      "London Borough of Barnet",
      "Brighton and Hove City Council",
      "Barnsley Metropolitan Borough Council",
      "Bolton Metropolitan Borough Council",
      "Bolsover District Council",
      "Boston Borough Council",
      "Bournemouth, Christchurch and Poole Council",
      "Blackpool Borough Council",
      "Braintree District Council",
      "Bracknell Forest Council",
      "City of Bradford Metropolitan District Council",
      "Breckland District Council",
      "Bromsgrove District Council",
      "Broadland District Council",
      "Broxtowe Borough Council",
      "Brentwood Borough Council",
      "Broxbourne Borough Council",
      "London Borough of Bromley",
      "Bristol City Council",
      "Buckinghamshire Council",
      "Burnley Borough Council",
      "Bury Metropolitan Borough Council",
      "Cambridge City Council",
      "Cambridgeshire County Council",
      "Cannock Chase District Council",
      "Carlisle City Council",
      "Castle Point Borough Council",
      "Canterbury City Council",
      "Central Bedfordshire Council",
      "Charnwood Borough Council",
      "Christchurch Borough Council",
      "Cheshire East Council",
      "Chichester District Council",
      "Chelmsford City Council",
      "Chiltern District Council",
      "Chorley Borough Council",
      "Cherwell District Council",
      "Chesterfield Borough Council",
      "Cheltenham Borough Council",
      "Cheshire West and Chester Council",
      "Calderdale Metropolitan Borough Council",
      "Cumbria County Council",
      "London Borough of Camden",
      "Colchester Borough Council",
      "Cornwall Council",
      "Copeland Borough Council",
      "Corby Borough Council",
      "Cotswold District Council",
      "Coventry City Council",
      "Cambridgeshire and Peterborough Combined Authority",
      "Craven District Council",
      "Crawley Borough Council",
      "London Borough of Croydon",
      "Dacorum Borough Council",
      "Darlington Borough Council",
      "Dartford Borough Council",
      "Daventry District Council",
      "Derbyshire County Council",
      "Derbyshire Dales District Council",
      "Derby City Council",
      "Devon County Council",
      "Doncaster Metropolitan Borough Council",
      "Dorset County Council",
      "Dover District Council",
      "Dorset Council",
      "Dudley Metropolitan Borough Council",
      "Durham County Council",
      "London Borough of Ealing",
      "Eastbourne Borough Council",
      "Eastleigh Borough Council",
      "East Cambridgeshire District Council",
      "East Devon District Council",
      "Eden District Council",
      "East Dorset District Council",
      "East Hampshire District Council",
      "East Hertfordshire District Council",
      "East Lindsey District Council",
      "Elmbridge Borough Council",
      "London Borough of Enfield",
      "East Northamptonshire Council",
      "Epping Forest District Council",
      "Epsom and Ewell Borough Council",
      "Erewash Borough Council",
      "East Riding of Yorkshire Council",
      "East Suffolk Council",
      "Essex County Council",
      "East Staffordshire Borough Council",
      "East Sussex County Council",
      "Exeter City Council",
      "Fareham Borough Council",
      "Fenland District Council",
      "Forest of Dean District Council",
      "Forest Heath District Council",
      "Fylde Borough Council",
      "Gateshead Metropolitan Borough Council",
      "Gedling Borough Council",
      "Greater London Authority",
      "Gloucester City Council",
      "Gloucestershire County Council",
      "Greater Manchester Combined Authority",
      "Gosport Borough Council",
      "Gravesham Borough Council",
      "Royal Borough of Greenwich",
      "Guildford Borough Council",
      "Great Yarmouth Borough Council",
      "Havant Borough Council",
      "Hambleton District Council",
      "Harrogate Borough Council",
      "Halton Borough Council",
      "Hampshire County Council",
      "Harborough District Council",
      "Harlow District Council",
      "Hastings Borough Council",
      "Hart District Council",
      "London Borough of Havering",
      "London Borough of Hackney",
      "Herefordshire Council",
      "Hertsmere Borough Council",
      "High Peak Borough Council",
      "London Borough of Hillingdon",
      "Hinckley and Bosworth Borough Council",
      "London Borough of Hammersmith & Fulham",
      "London Borough of Hounslow",
      "Horsham District Council",
      "Hartlepool Borough Council",
      "Hertfordshire County Council",
      "London Borough of Harrow",
      "London Borough of Haringey",
      "Huntingdonshire District Council",
      "Hyndburn Borough Council",
      "Council of the Isles of Scilly",
      "Isle of Wight Council",
      "Ipswich Borough Council",
      "London Borough of Islington",
      "Royal Borough of Kensington and Chelsea",
      "Kent County Council",
      "Kettering Borough Council",
      "Hull City Council",
      "Borough Council of King's Lynn and West Norfolk",
      "Kirklees Council",
      "Royal Borough of Kingston upon Thames",
      "Knowsley Metropolitan Borough Council",
      "Lancaster City Council",
      "Lancashire County Council",
      "London Borough of Lambeth",
      "Leicester City Council",
      "Liverpool City Region",
      "Leeds City Council",
      "Leicestershire County Council",
      "Lewes District Council",
      "London Borough of Lewisham",
      "City of Lincoln Council",
      "Lichfield District Council",
      "Lincolnshire County Council",
      "Liverpool City Council",
      "City of London Corporation",
      "Luton Borough Council",
      "Maidstone Borough Council",
      "Maldon District Council",
      "Manchester City Council",
      "Mansfield District Council",
      "Malvern Hills District Council",
      "Middlesbrough Borough Council",
      "Mid Devon District Council",
      "Medway Council",
      "Melton Borough Council",
      "Mendip District Council",
      "Milton Keynes Council",
      "Mole Valley District Council",
      "London Borough of Merton",
      "Mid Sussex District Council",
      "Mid Suffolk District Council",
      "Northumberland County Council",
      "North Devon District Council",
      "North Dorset District Council",
      "Newark and Sherwood District Council",
      "Newcastle-under-Lyme Borough Council",
      "North East Combined Authority",
      "North East Derbyshire District Council",
      "North East Lincolnshire Council",
      "Newcastle City Council",
      "New Forest District Council",
      "Norfolk County Council",
      "Nottingham City Council",
      "North Hertfordshire District Council",
      "North Kesteven District Council",
      "North Lincolnshire Council",
      "North Norfolk District Council",
      "Northampton Borough Council",
      "Norwich City Council",
      "North Somerset  Council",
      "North of Tyne Combined Authority",
      "Northamptonshire County Council",
      "Nottinghamshire County Council",
      "North Tyneside Council",
      "Nuneaton and Bedworth Borough Council",
      "North Warwickshire Borough Council",
      "North West Leicestershire District Council",
      "London Borough of Newham",
      "North Yorkshire County Council",
      "Oadby and Wigston Borough Council",
      "Oldham Metropolitan Borough Council",
      "Oxfordshire County Council",
      "Oxford City Council",
      "Pendle Borough Council",
      "Plymouth City Council",
      "Borough of Poole",
      "Portsmouth City Council",
      "Preston City Council",
      "Peterborough City Council",
      "Purbeck District Council",
      "Redcar and Cleveland Borough Council",
      "Rochdale Metropolitan Borough Council",
      "London Borough of Redbridge",
      "Reading Borough Council",
      "Redditch Borough Council",
      "Reigate and Banstead Borough Council",
      "Ribble Valley Borough Council",
      "London Borough of Richmond upon Thames",
      "Richmondshire District Council",
      "Rochford District Council",
      "Rother District Council",
      "Rossendale Borough Council",
      "Rotherham Metropolitan Borough Council",
      "Rugby Borough Council",
      "Rushmoor Borough Council",
      "Runnymede Borough Council",
      "Rushcliffe Borough Council",
      "Rutland County Council",
      "Ryedale District Council",
      "St Albans City and District Council",
      "Sandwell Metropolitan Borough Council",
      "South Bucks District Council",
      "South Cambridgeshire District Council",
      "Scarborough Borough Council",
      "Sheffield City Region",
      "South Derbyshire District Council",
      "St Edmundsbury Borough Council",
      "Sedgemoor District Council",
      "Selby District Council",
      "Sevenoaks District Council",
      "Suffolk County Council",
      "Sefton Metropolitan Borough Council",
      "South Gloucestershire Council",
      "South Hams District Council",
      "Folkestone and Hythe Council",
      "Sheffield City Council",
      "St Helens Council",
      "South Holland District Council",
      "Shropshire Council",
      "South Kesteven District Council",
      "Stockport Metropolitan Borough Council",
      "South Lakeland District Council",
      "Salford City Council",
      "Slough Borough Council",
      "Sunderland City Council",
      "South Norfolk District Council",
      "South Northamptonshire Council",
      "Solihull Metropolitan Borough Council",
      "Somerset County Council",
      "Southend-on-Sea Borough Council",
      "South Oxfordshire District Council",
      "Spelthorne Borough Council",
      "South Ribble Borough Council",
      "Surrey County Council",
      "South Somerset District Council",
      "South Staffordshire Council",
      "Stafford Borough Council",
      "Stoke-on-Trent City Council",
      "Staffordshire Moorlands District Council",
      "Southampton City Council",
      "London Borough of Sutton",
      "Stroud District Council",
      "Stratford-on-Avon District Council",
      "Staffordshire County Council",
      "Stockton-on-Tees Borough Council",
      "Stevenage Borough Council",
      "South Tyneside Council",
      "Suffolk Coastal District Council",
      "Surrey Heath Borough Council",
      "Swindon Borough Council",
      "London Borough of Southwark",
      "Swale Borough Council",
      "Somerset West and Taunton Council",
      "Tameside Metropolitan Borough Council",
      "Tandridge District Council",
      "Taunton Deane Borough Council",
      "Tamworth Borough Council",
      "Teignbridge District Council",
      "Tendring District Council",
      "Test Valley Borough Council",
      "Tewkesbury Borough Council",
      "Telford & Wrekin Council",
      "Thanet District Council",
      "Three Rivers District Council",
      "Thurrock Council",
      "Torbay Council",
      "Tonbridge and Malling Borough Council",
      "Torridge District Council",
      "Trafford Metropolitan Borough Council",
      "Tunbridge Wells Borough Council",
      "Tees Valley Combined Authority",
      "London Borough of Tower Hamlets",
      "Uttlesford District Council",
      "Vale of White Horse District Council",
      "Waverley Borough Council",
      "Warwickshire County Council",
      "Watford Borough Council",
      "Waveney District Council",
      "Warwick District Council",
      "West Berkshire Council",
      "West Devon Borough Council",
      "West Dorset District Council",
      "Wealden District Council",
      "West of England Combined Authority",
      "Wellingborough Borough Council",
      "Welwyn Hatfield Borough Council",
      "Weymouth and Portland Borough Council",
      "London Borough of Waltham Forest",
      "Wigan Metropolitan Borough Council",
      "Wiltshire Council",
      "Winchester City Council",
      "Wakefield Metropolitan District Council",
      "West Lancashire Borough Council",
      "West Lindsey District Council",
      "Walsall Metropolitan Borough Council",
      "City of Wolverhampton Council",
      "West Midlands Combined Authority",
      "London Borough of Wandsworth",
      "Royal Borough of Windsor and Maidenhead",
      "Worcester City Council",
      "Woking Borough Council",
      "Wokingham Borough Council",
      "Worcestershire County Council",
      "Worthing Borough Council",
      "West Oxfordshire District Council",
      "Wirral Borough Council",
      "Warrington Borough Council",
      "West Suffolk Council",
      "City of Westminster",
      "West Somerset District Council",
      "West Sussex County Council",
      "Wychavon District Council",
      "West Yorkshire Combined Authority",
      "Wyre Forest District Council",
      "Wycombe District Council",
      "Wyre Borough Council",
      "City of York Council",
      "North Northamtonshire Council",
      "West Northamtonshire Council",
  ] %}
    
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        {# <div class="govuk-caption-xl">Feedback</div> #}
        <h1 class="govuk-heading-xl govuk-!-margin-bottom-5">Help to publish your planning and housing data</h1>
        <p class="govuk-body-l govuk-!-margin-bottom-6">
          Get feedback and support to publish data that meets standards set by the Department for Levelling Up, Housing and Communities.</p>
      </div>
    </div>

    <div class="govuk-grid-row">
      <div class="govuk-grid-column-full">
        {# <h1 class="govuk-heading-m govuk-!-margin-bottom-3">Local Planning Authorities</h1> #}
        {# <p class="govuk-body govuk-!-margin-bottom-6">The organisations listed below publish planning and housing data</p> #}
      </div>
      <div class="govuk-grid-column-two-thirds">
        <form class="govuk-!-margin-bottom-6">
          <label class="govuk-label govuk-label--m govuk-!-font-weight-bold" for="filter-organisations-list">Search for your organisation</label>
          <input class="govuk-input" type="text" id="filter-organisations-list" placeholder="For example, Lambeth">
        </form>      
      </div>
      <div class="govuk-grid-column-full">
        <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">
      </div>
    </div>
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-full">
        {% set letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ" | list %}
        {% for char in letters %}
          {% set theseLPAs = lpas | get_items_beginning_with(char) %}
          {% if (theseLPAs | length) > 0 %}
            <div class="govuk-grid-row js-filter-item">
              <div class="govuk-grid-column-one-third">
                <h2 class="govuk-heading-xl">{{ char }}</h2>
              </div>         
              <div class="govuk-grid-column-two-thirds">
                <ul class="govuk-list govuk-!-margin-bottom-0">
                  {% for lpa in theseLPAs | sort %}
                    <li class="govuk-!-margin-bottom-1 js-filter-item">
                      <a href="organisation-summary.html?orgname={{ lpa | replace('.','') | replace(',','') | replace("'","") }}" class="govuk-link">{{ lpa }}</a>
                    </li>
                  {% endfor %}
                </ul>
              </div>
              <div class="govuk-grid-column-full">
                <hr class="govuk-section-break govuk-section-break--l govuk-section-break--visible">
              </div>
            </div>
          {% endif %}
          <!-- /.govuk-grid-row -->
        {% endfor %}
      </div>
    </div>    

  </main>
{% endblock %}

{% block bodyEnd %}
  <script>
    let filterItems = document.querySelectorAll('.js-filter-item')
    function liveSearch() {
        let search_query = document.getElementById("filter-organisations-list").value;
        //Use innerText if all contents are visible
        //Use textContent for including hidden elements
        for (var i = 0; i < filterItems.length; i++) {
            if(filterItems[i].textContent.toLowerCase()
                    .includes(search_query.toLowerCase())) {
                filterItems[i].classList.remove("govuk-visually-hidden");
            } else {
                filterItems[i].classList.add("govuk-visually-hidden");
            }
        }
    }
    //A little delay
    let typingTimer;               
    let typeInterval = 500;  
    let searchInput = document.getElementById('filter-organisations-list');
    searchInput.addEventListener('keyup', () => {
        clearTimeout(typingTimer);
        typingTimer = setTimeout(liveSearch, typeInterval);
    });
  </script>
  {{ super() }}
{% endblock bodyEnd %}
